/home/kejunwu/tools/llvm-vortex/bin/clang++ --sysroot=/home/kejunwu/tools/riscv32-gnu-toolchain/riscv32-unknown-elf --gcc-toolchain=/home/kejunwu/tools/riscv32-gnu-toolchain -Xclang -target-feature -Xclang +vortex -Xclang -target-feature -Xclang +zicond -mllvm -disable-loop-idiom-all  -march=rv32imaf -mabi=ilp32f -O3 -mcmodel=medany -fno-rtti -fno-exceptions -nostartfiles -nostdlib -fdata-sections -ffunction-sections -I/home/kejunwu/vortex/kernel/include -I/home/kejunwu/vortex/build/hw -I/home/kejunwu/vortex/sim/common -DXLEN_32 -DNDEBUG  /home/kejunwu/vortex/tests/regression/sgemm/kernel.cpp -Wl,-Bstatic,--gc-sections,-T,/home/kejunwu/vortex/kernel/scripts/link32.ld,--defsym=STARTUP_ADDR=0x80000000 /home/kejunwu/vortex/build/kernel/libvortex.a -L/home/kejunwu/tools/libc32/lib -lm -lc /home/kejunwu/tools/libcrt32/lib/baremetal/libclang_rt.builtins-riscv32.a -o kernel.elf
OBJCOPY=/home/kejunwu/tools/llvm-vortex/bin/llvm-objcopy /home/kejunwu/vortex/kernel/scripts/vxbin.py kernel.elf kernel.vxbin
LD_LIBRARY_PATH=/home/kejunwu/vortex/build/runtime: VORTEX_DRIVER=simx ./sgemm -n64
open device connection
data type: float
matrix size: 64x64
allocate device memory
A_addr=0x10000
B_addr=0x14000
C_addr=0x18000
upload matrix A buffer
upload matrix B buffer
Upload kernel binary
upload kernel argument
start device
wait for completion
Elapsed time: 2548 ms
download destination buffer
verify result
cleanup
PERF: core0: instrs=501340, cycles=605272, IPC=0.828289
PERF: core1: instrs=501340, cycles=605273, IPC=0.828287
PERF: core2: instrs=501340, cycles=605343, IPC=0.828192
PERF: core3: instrs=501340, cycles=605412, IPC=0.828097
PERF: instrs=2005360, cycles=605412, IPC=3.312389
PASSED!
/home/kejunwu/tools/llvm-vortex/bin/clang++ --sysroot=/home/kejunwu/tools/riscv32-gnu-toolchain/riscv32-unknown-elf --gcc-toolchain=/home/kejunwu/tools/riscv32-gnu-toolchain -Xclang -target-feature -Xclang +vortex -Xclang -target-feature -Xclang +zicond -mllvm -disable-loop-idiom-all  -march=rv32imaf -mabi=ilp32f -O3 -mcmodel=medany -fno-rtti -fno-exceptions -nostartfiles -nostdlib -fdata-sections -ffunction-sections -I/home/kejunwu/vortex/kernel/include -I/home/kejunwu/vortex/build/hw -I/home/kejunwu/vortex/sim/common -DXLEN_32 -DNDEBUG  /home/kejunwu/vortex/tests/regression/sgemm/kernel.cpp -Wl,-Bstatic,--gc-sections,-T,/home/kejunwu/vortex/kernel/scripts/link32.ld,--defsym=STARTUP_ADDR=0x80000000 /home/kejunwu/vortex/build/kernel/libvortex.a -L/home/kejunwu/tools/libc32/lib -lm -lc /home/kejunwu/tools/libcrt32/lib/baremetal/libclang_rt.builtins-riscv32.a -o kernel.elf
OBJCOPY=/home/kejunwu/tools/llvm-vortex/bin/llvm-objcopy /home/kejunwu/vortex/kernel/scripts/vxbin.py kernel.elf kernel.vxbin
LD_LIBRARY_PATH=/home/kejunwu/vortex/build/runtime: VORTEX_DRIVER=simx ./sgemm -n256
open device connection
data type: float
matrix size: 256x256
allocate device memory
A_addr=0x10000
B_addr=0x50000
C_addr=0x90000
upload matrix A buffer
upload matrix B buffer
Upload kernel binary
upload kernel argument
start device
wait for completion
Elapsed time: 249246 ms
download destination buffer
verify result
cleanup
PERF: core0: instrs=29986396, cycles=38455747, IPC=0.779764
PERF: core1: instrs=29986396, cycles=38726443, IPC=0.774313
PERF: core2: instrs=29986396, cycles=38132436, IPC=0.786375
PERF: core3: instrs=29986396, cycles=38699132, IPC=0.774860
PERF: instrs=119945584, cycles=38726443, IPC=3.097253
PASSED!
/home/kejunwu/tools/llvm-vortex/bin/clang++ --sysroot=/home/kejunwu/tools/riscv32-gnu-toolchain/riscv32-unknown-elf --gcc-toolchain=/home/kejunwu/tools/riscv32-gnu-toolchain -Xclang -target-feature -Xclang +vortex -Xclang -target-feature -Xclang +zicond -mllvm -disable-loop-idiom-all  -march=rv32imaf -mabi=ilp32f -O3 -mcmodel=medany -fno-rtti -fno-exceptions -nostartfiles -nostdlib -fdata-sections -ffunction-sections -I/home/kejunwu/vortex/kernel/include -I/home/kejunwu/vortex/build/hw -I/home/kejunwu/vortex/sim/common -DXLEN_32 -DNDEBUG  /home/kejunwu/vortex/tests/regression/sgemm/kernel.cpp -Wl,-Bstatic,--gc-sections,-T,/home/kejunwu/vortex/kernel/scripts/link32.ld,--defsym=STARTUP_ADDR=0x80000000 /home/kejunwu/vortex/build/kernel/libvortex.a -L/home/kejunwu/tools/libc32/lib -lm -lc /home/kejunwu/tools/libcrt32/lib/baremetal/libclang_rt.builtins-riscv32.a -o kernel.elf
OBJCOPY=/home/kejunwu/tools/llvm-vortex/bin/llvm-objcopy /home/kejunwu/vortex/kernel/scripts/vxbin.py kernel.elf kernel.vxbin
LD_LIBRARY_PATH=/home/kejunwu/vortex/build/runtime: VORTEX_DRIVER=simx ./sgemm -n256
open device connection
data type: float
matrix size: 256x256
allocate device memory
A_addr=0x10000
B_addr=0x50000
C_addr=0x90000
upload matrix A buffer
upload matrix B buffer
Upload kernel binary
upload kernel argument
start device
wait for completion
make: *** [../common.mk:102: run-simx] Hangup
/home/kejunwu/tools/llvm-vortex/bin/clang++ --sysroot=/home/kejunwu/tools/riscv32-gnu-toolchain/riscv32-unknown-elf --gcc-toolchain=/home/kejunwu/tools/riscv32-gnu-toolchain -Xclang -target-feature -Xclang +vortex -Xclang -target-feature -Xclang +zicond -mllvm -disable-loop-idiom-all  -march=rv32imaf -mabi=ilp32f -O3 -mcmodel=medany -fno-rtti -fno-exceptions -nostartfiles -nostdlib -fdata-sections -ffunction-sections -I/home/kejunwu/vortex/kernel/include -I/home/kejunwu/vortex/build/hw -I/home/kejunwu/vortex/sim/common -DXLEN_32 -DNDEBUG  /home/kejunwu/vortex/tests/regression/sgemm/kernel.cpp -Wl,-Bstatic,--gc-sections,-T,/home/kejunwu/vortex/kernel/scripts/link32.ld,--defsym=STARTUP_ADDR=0x80000000 /home/kejunwu/vortex/build/kernel/libvortex.a -L/home/kejunwu/tools/libc32/lib -lm -lc /home/kejunwu/tools/libcrt32/lib/baremetal/libclang_rt.builtins-riscv32.a -o kernel.elf
OBJCOPY=/home/kejunwu/tools/llvm-vortex/bin/llvm-objcopy /home/kejunwu/vortex/kernel/scripts/vxbin.py kernel.elf kernel.vxbin
LD_LIBRARY_PATH=/home/kejunwu/vortex/build/runtime: VORTEX_DRIVER=simx ./sgemm -n256
open device connection
data type: float
matrix size: 256x256
allocate device memory
A_addr=0x10000
B_addr=0x50000
C_addr=0x90000
upload matrix A buffer
upload matrix B buffer
Upload kernel binary
upload kernel argument
start device
wait for completion
Elapsed time: 178807 ms
download destination buffer
verify result
*** error: [0] expected=62.298553, actual=0.000000
*** error: [1] expected=64.718201, actual=0.000000
*** error: [2] expected=68.067558, actual=0.000000
*** error: [3] expected=69.709663, actual=-11.299994
*** error: [4] expected=64.786095, actual=4126755.250000
*** error: [5] expected=63.833778, actual=0.000000
*** error: [6] expected=63.837849, actual=-13390949671574790535357639323287552.000000
*** error: [7] expected=65.811653, actual=0.000000
*** error: [8] expected=65.887360, actual=0.000000
*** error: [9] expected=66.909676, actual=-199709917184.000000
*** error: [10] expected=63.161301, actual=193644.375000
*** error: [11] expected=67.539078, actual=693410189017088.000000
*** error: [12] expected=67.474052, actual=-44374696.000000
*** error: [13] expected=66.214760, actual=-0.000000
*** error: [14] expected=62.137924, actual=0.000000
*** error: [15] expected=63.303040, actual=-2067262592.000000
*** error: [16] expected=62.943550, actual=0.000000
*** error: [17] expected=65.672188, actual=1230.385620
*** error: [18] expected=63.070667, actual=26.059141
*** error: [19] expected=63.782345, actual=0.000000
*** error: [20] expected=68.854408, actual=-8334681635868286518932980640191086592.000000
*** error: [21] expected=72.227608, actual=-0.000000
*** error: [22] expected=62.804440, actual=1281.727783
*** error: [23] expected=71.336815, actual=-0.000000
*** error: [24] expected=66.656090, actual=-8162455.500000
*** error: [25] expected=66.546455, actual=-2910658.000000
*** error: [26] expected=67.937271, actual=-2947966230855680.000000
*** error: [27] expected=71.899597, actual=-23904.054688
*** error: [28] expected=67.153481, actual=-0.000000
*** error: [29] expected=65.448730, actual=1871994509347979788288.000000
*** error: [30] expected=63.811646, actual=0.000000
*** error: [31] expected=66.335190, actual=0.000000
*** error: [32] expected=65.531166, actual=-70756439109630777494601728.000000
*** error: [33] expected=71.224159, actual=-58.962112
*** error: [34] expected=69.464249, actual=-0.000000
*** error: [35] expected=64.767441, actual=0.000000
*** error: [36] expected=68.122978, actual=0.000000
*** error: [37] expected=66.291519, actual=565568318862779471961784320.000000
*** error: [38] expected=68.363464, actual=1367035.500000
*** error: [39] expected=65.882240, actual=5388253696.000000
*** error: [40] expected=69.841301, actual=165929906189643828098222288036866031616.000000
*** error: [41] expected=67.481445, actual=-5879.425293
*** error: [42] expected=65.315552, actual=-429107.843750
*** error: [43] expected=66.868286, actual=-0.000000
*** error: [44] expected=63.432037, actual=-1568179.500000
*** error: [45] expected=70.483055, actual=17020042.000000
*** error: [46] expected=67.242378, actual=-0.000000
*** error: [47] expected=70.515656, actual=0.000010
*** error: [48] expected=64.696106, actual=-0.000000
*** error: [49] expected=65.313042, actual=23387132.000000
*** error: [50] expected=68.163719, actual=-0.000000
*** error: [51] expected=65.835663, actual=-531765535914852352.000000
*** error: [52] expected=64.178642, actual=3.229218
*** error: [53] expected=66.532509, actual=-0.000001
*** error: [54] expected=62.829536, actual=-15002094840810203095024158113792.000000
*** error: [55] expected=61.372433, actual=-0.000000
*** error: [56] expected=66.506104, actual=17994877353246445309259677696.000000
*** error: [57] expected=65.144768, actual=-407990779013048009052513107968.000000
*** error: [58] expected=64.191971, actual=-0.000145
*** error: [59] expected=66.869698, actual=-171442125668352.000000
*** error: [60] expected=61.029270, actual=-52675.691406
*** error: [61] expected=65.278656, actual=145821146416517884307218100981334016.000000
*** error: [62] expected=68.803986, actual=0.000000
*** error: [63] expected=67.773155, actual=4.753739
*** error: [64] expected=65.278809, actual=-533889702206567966834688.000000
*** error: [65] expected=64.528023, actual=-0.001411
*** error: [66] expected=68.493256, actual=-210457286907023512250869612544.000000
*** error: [67] expected=62.941330, actual=39377572812626696895252497485004800.000000
*** error: [68] expected=66.930588, actual=0.000000
*** error: [69] expected=62.866070, actual=5134349063559244634957227909768544256.000000
*** error: [70] expected=64.067802, actual=0.000000
*** error: [71] expected=66.690231, actual=14800743724795035648.000000
*** error: [72] expected=66.513733, actual=-178809226251658281877504.000000
*** error: [73] expected=68.317482, actual=468005593842668535808.000000
*** error: [74] expected=64.216980, actual=-0.000000
*** error: [75] expected=64.993080, actual=-541341739886697243188790917332992.000000
*** error: [76] expected=65.564362, actual=481194720.000000
*** error: [77] expected=64.806816, actual=-403260993574835782156288.000000
*** error: [78] expected=68.837349, actual=0.000000
*** error: [79] expected=70.808891, actual=-0.000199
*** error: [80] expected=65.016258, actual=-8170419471090712553087037838838464512.000000
*** error: [81] expected=64.996414, actual=-0.000000
*** error: [82] expected=64.516365, actual=0.000000
*** error: [83] expected=66.705696, actual=-0.000000
*** error: [84] expected=67.335045, actual=0.000000
*** error: [85] expected=70.578217, actual=-0.000000
*** error: [86] expected=60.841656, actual=-8557871179268563664896.000000
*** error: [87] expected=62.294006, actual=0.000000
*** error: [88] expected=64.095535, actual=878256.062500
*** error: [89] expected=60.775921, actual=-116077071881697061380572712920797937664.000000
*** error: [90] expected=67.337173, actual=-9.117792
*** error: [91] expected=67.971710, actual=-0.000000
*** error: [92] expected=69.060204, actual=0.000000
*** error: [93] expected=63.063026, actual=-608171.187500
*** error: [94] expected=64.348282, actual=0.000000
*** error: [95] expected=71.031960, actual=0.000000
*** error: [96] expected=66.133781, actual=-7217794797496244659856343040.000000
*** error: [97] expected=66.521378, actual=-0.000000
*** error: [98] expected=62.486744, actual=0.000000
*** error: [99] expected=67.796516, actual=-4347772534784.000000
cleanup
PERF: core0: instrs=42569308, cycles=44919522, IPC=0.947679
PERF: core1: instrs=42569308, cycles=44919521, IPC=0.947679
PERF: core2: instrs=42569308, cycles=44919524, IPC=0.947679
PERF: core3: instrs=42569308, cycles=44919523, IPC=0.947679
PERF: instrs=170277232, cycles=44919524, IPC=3.790718
Found 65536 errors!
FAILED!
/home/kejunwu/tools/llvm-vortex/bin/clang++ --sysroot=/home/kejunwu/tools/riscv32-gnu-toolchain/riscv32-unknown-elf --gcc-toolchain=/home/kejunwu/tools/riscv32-gnu-toolchain -Xclang -target-feature -Xclang +vortex -Xclang -target-feature -Xclang +zicond -mllvm -disable-loop-idiom-all  -march=rv32imaf -mabi=ilp32f -O3 -mcmodel=medany -fno-rtti -fno-exceptions -nostartfiles -nostdlib -fdata-sections -ffunction-sections -I/home/kejunwu/vortex/kernel/include -I/home/kejunwu/vortex/build/hw -I/home/kejunwu/vortex/sim/common -DXLEN_32 -DNDEBUG  /home/kejunwu/vortex/tests/regression/sgemm/kernel.cpp -Wl,-Bstatic,--gc-sections,-T,/home/kejunwu/vortex/kernel/scripts/link32.ld,--defsym=STARTUP_ADDR=0x80000000 /home/kejunwu/vortex/build/kernel/libvortex.a -L/home/kejunwu/tools/libc32/lib -lm -lc /home/kejunwu/tools/libcrt32/lib/baremetal/libclang_rt.builtins-riscv32.a -o kernel.elf
OBJCOPY=/home/kejunwu/tools/llvm-vortex/bin/llvm-objcopy /home/kejunwu/vortex/kernel/scripts/vxbin.py kernel.elf kernel.vxbin
g++ -std=c++17 -Wall -Wextra -pedantic -Wfatal-errors -I/home/kejunwu/vortex/runtime/include -I/home/kejunwu/vortex/build/hw -I/home/kejunwu/vortex/sim/common  -O2 -DNDEBUG /home/kejunwu/vortex/tests/regression/sgemm/main.cpp -L/home/kejunwu/vortex/build/runtime -lvortex -o sgemm
LD_LIBRARY_PATH=/home/kejunwu/vortex/build/runtime: VORTEX_DRIVER=simx ./sgemm -n256
open device connection
data type: int8_t
matrix size: 256x256
allocate device memory
A_addr=0x10000
B_addr=0x20000
C_addr=0x30000
upload matrix A buffer
upload matrix B buffer
Upload kernel binary
upload kernel argument
start device
wait for completion
Elapsed time: 171751 ms
download destination buffer
verify result
cleanup
PERF: core0: instrs=42569308, cycles=43647101, IPC=0.975307
PERF: core1: instrs=42569308, cycles=43647102, IPC=0.975307
PERF: core2: instrs=42569308, cycles=43647100, IPC=0.975307
PERF: core3: instrs=42569308, cycles=43647099, IPC=0.975307
PERF: instrs=170277232, cycles=43647102, IPC=3.901227
PASSED!
/home/kejunwu/tools/llvm-vortex/bin/clang++ --sysroot=/home/kejunwu/tools/riscv32-gnu-toolchain/riscv32-unknown-elf --gcc-toolchain=/home/kejunwu/tools/riscv32-gnu-toolchain -Xclang -target-feature -Xclang +vortex -Xclang -target-feature -Xclang +zicond -mllvm -disable-loop-idiom-all  -march=rv32imaf -mabi=ilp32f -O3 -mcmodel=medany -fno-rtti -fno-exceptions -nostartfiles -nostdlib -fdata-sections -ffunction-sections -I/home/kejunwu/vortex/kernel/include -I/home/kejunwu/vortex/build/hw -I/home/kejunwu/vortex/sim/common -DXLEN_32 -DNDEBUG  /home/kejunwu/vortex/tests/regression/sgemm/kernel.cpp -Wl,-Bstatic,--gc-sections,-T,/home/kejunwu/vortex/kernel/scripts/link32.ld,--defsym=STARTUP_ADDR=0x80000000 /home/kejunwu/vortex/build/kernel/libvortex.a -L/home/kejunwu/tools/libc32/lib -lm -lc /home/kejunwu/tools/libcrt32/lib/baremetal/libclang_rt.builtins-riscv32.a -o kernel.elf
OBJCOPY=/home/kejunwu/tools/llvm-vortex/bin/llvm-objcopy /home/kejunwu/vortex/kernel/scripts/vxbin.py kernel.elf kernel.vxbin
g++ -std=c++17 -Wall -Wextra -pedantic -Wfatal-errors -I/home/kejunwu/vortex/runtime/include -I/home/kejunwu/vortex/build/hw -I/home/kejunwu/vortex/sim/common  -O2 -DNDEBUG /home/kejunwu/vortex/tests/regression/sgemm/main.cpp -L/home/kejunwu/vortex/build/runtime -lvortex -o sgemm
LD_LIBRARY_PATH=/home/kejunwu/vortex/build/runtime: VORTEX_DRIVER=simx ./sgemm -n256
open device connection
input type: int8_t
output type: int32_t
matrix size: 256x256
allocate device memory
A_addr=0x10000
B_addr=0x20000
C_addr=0x30000
upload matrix A buffer
upload matrix B buffer
Upload kernel binary
upload kernel argument
start device
wait for completion
Elapsed time: 172800 ms
download destination buffer
verify result
cleanup
PERF: core0: instrs=42602076, cycles=43717084, IPC=0.974495
PERF: core1: instrs=42602076, cycles=43717083, IPC=0.974495
PERF: core2: instrs=42602076, cycles=43742796, IPC=0.973922
PERF: core3: instrs=42602076, cycles=43717082, IPC=0.974495
PERF: instrs=170408304, cycles=43742796, IPC=3.895689
PASSED!
